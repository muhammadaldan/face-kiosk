(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(t,e){},163:function(t,e){},165:function(t,e){},188:function(t,e){},189:function(t,e){},191:function(t,e){},193:function(t,e){},201:function(t,e){},203:function(t,e){},206:function(t,e,n){},207:function(t,e,n){"use strict";n.r(e);var i=n(5),c=n.n(i),o=n(80),r=n.n(o),a=n(26),u=n(81),l=function(t){var e=Object(i.useState)(),n=Object(a.a)(e,2),c=n[0],o=n[1];return Object(i.useEffect)(function(){u.a.load(t).then(function(t){o(t)})},[t]),c},s=n(8),f=n.n(s),d=n(41),h=n(15),b=function(t,e){Object(i.useEffect)(function(){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:{ideal:4096},height:{ideal:2160}}}).then(function(n){t.current.srcObject=n,t.current.onloadedmetadata=function(){e()}})},[e,t])},x=function(t){var e=t.getContext("2d"),n=window.devicePixelRatio,i=t.width/n,c=t.height/n;return{setWidth:function(e){i=e,t.style.width=e+"px",t.width=e*n},setHeight:function(e){c=e,t.style.height=e+"px",t.height=e*n},width:i,height:c,clearAll:function(){return e.clearRect(0,0,i*n,c*n)},clearRect:function(t,i,c,o){return e.clearRect(t*n,i*n,c*n,o*n)},setFont:function(t){var i=parseInt(t,10)*n,c=t.replace(/^\d+px/,i+"px");e.font=c},setTextBaseLine:function(t){e.textBaseline=t},setStrokeStyle:function(t){e.strokeStyle=t},setLineWidth:function(t){e.lineWidth=t*n},strokeRect:function(t,i,c,o){return e.strokeRect(t*n,i*n,c*n,o*n)},setFillStyle:function(t){e.fillStyle=t},measureText:function(t){var i=e.measureText(t);return{width:i.width/n,actualBoundingBoxLeft:i.actualBoundingBoxLeft/n,actualBoundingBoxRight:i.actualBoundingBoxRight/n,actualBoundingBoxAscent:i.actualBoundingBoxAscent/n,actualBoundingBoxDescent:i.actualBoundingBoxDescent/n}},fillRect:function(t,i,c,o){return e.fillRect(t*n,i*n,c*n,o*n)},fillText:function(t,i,c){return e.fillText(t,i*n,c*n)}}},v=n(96).connect("mqtt://127.0.0.1:1884"),m=function(t){var e=(100*t.score).toFixed(1);return"".concat(t.label," ").concat(e,"%")},g=function(t,e){var n="".concat(16,"px 'ibm-plex-sans', Helvetica Neue, Arial, sans-serif");t.setFont(n),t.setTextBaseLine("top");var i=parseInt(n,10);e.forEach(function(e){var n=e.bbox[0],c=e.bbox[1],o=e.bbox[2],r=e.bbox[3],a=m(e),u="M"==a[0]?"true,#":"false,#";v.publish("data",u),a.includes("No")?(t.setStrokeStyle("#FF0000"),t.setLineWidth(4)):(t.setStrokeStyle("#00FF00"),t.setLineWidth(4)),t.strokeRect(Math.round(n),Math.round(c),Math.round(o),Math.round(r)),a.includes("No")?t.setFillStyle("#FF0000"):t.setFillStyle("#00FF00");var l=t.measureText(a).width;t.fillRect(Math.round(n-2),Math.round(c-(i+8)-6),Math.round(l+16),Math.round(i+8))}),e.forEach(function(e){var n=e.bbox[0],c=e.bbox[1],o=m(e);t.setFillStyle("#ffffff"),t.fillText(o,Math.round(n-2+8),Math.round(c-(i+8)-6+4))})},p=c.a.memo(function(t){var e=t.model,n=t.onPrediction,o=t.fit,r=t.mirrored,a=t.render,u=Object(i.useRef)(),l=Object(i.useRef)();b(u,function(){s()});var s=Object(i.useCallback)(Object(h.a)(f.a.mark(function t(){var i,c,h,b,v,m,p,y,w,B,F,M;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.detect(u.current);case 2:i=t.sent,n&&n(i),c=u.current.offsetWidth,h=u.current.offsetHeight,b=u.current.videoWidth,v=u.current.videoHeight,m=c/b,p=h/v,y="aspectFit"===o?Math.min(m,p):Math.max(m,p),w=(c-b*y)/2,B=(h-v*y)/2,(F=x(l.current)).setWidth(c),F.setHeight(h),F.clearAll(),M=i.map(function(t){var e=t.bbox[0]*y+w,n=t.bbox[1]*y+B,i=t.bbox[2]*y,o=t.bbox[3]*y;return r&&(e=c-e-i),Object(d.a)(Object(d.a)({},t),{},{bbox:[e,n,i,o]})}),(a||g)(F,M),requestAnimationFrame(function(){s()});case 21:case"end":return t.stop()}},t)})),[o,r,e,n,a]);return l.current&&(l.current.style.position="absolute",l.current.style.left="0",l.current.style.top="0"),u.current&&(u.current.style.width="100%",u.current.style.height="100%",u.current.style.objectFit="aspectFit"===o?"contain":"cover",u.current.style.transform=r?"scaleX(-1)":"scaleX(1)"),c.a.createElement("div",{style:{position:"relative"}},c.a.createElement("video",{autoPlay:!0,playsInline:!0,muted:!0,ref:u}),c.a.createElement("canvas",{ref:l}))}),y=(n(206),function(){var t=l("/model_web");return c.a.createElement("div",{className:"fillPage"},c.a.createElement(p,{model:t,fit:"aspectFill",mirrored:!0}))}),w=document.getElementById("root");r.a.render(c.a.createElement(y,null),w)},82:function(t,e,n){t.exports=n(207)},90:function(t,e){},91:function(t,e){},92:function(t,e){},93:function(t,e){},94:function(t,e){},95:function(t,e){},98:function(t,e){}},[[82,1,2]]]);
//# sourceMappingURL=main.b07ee34b.chunk.js.map